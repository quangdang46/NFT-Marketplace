Người dùng -> Frontend: Đăng nhập
Frontend -> api-gateway: POST /auth/login
api-gateway -> RabbitMQ: Publish { action: "login" } to auth-queue
RabbitMQ -> auth-service: Consume
auth-service -> RabbitMQ: Publish { access_token: "jwt" }
RabbitMQ -> api-gateway: Consume
api-gateway -> Frontend: Trả về JWT

Người dùng -> Frontend: Tạo collection
Frontend -> api-gateway: POST /collections
api-gateway -> RabbitMQ: Publish { action: "createCollection" } to collection-queue
RabbitMQ -> collection-service: Consume
collection-service -> RabbitMQ: Publish { action: "verify", token } to auth-queue
auth-service -> RabbitMQ: Publish { userId: "uuid" }
RabbitMQ -> collection-service: Consume
collection-service -> MongoDB: Lưu collection (status: "pending")
collection-service -> RabbitMQ: Publish { collectionId: "abc123", status: "pending" }
RabbitMQ -> api-gateway: Consume
api-gateway -> Frontend: Trả về collectionId

Admin -> Admin Interface: Duyệt collection
Admin Interface -> api-gateway: POST /collections/approve
api-gateway -> RabbitMQ: Publish { action: "approveCollection", collectionId, token } to collection-queue
RabbitMQ -> collection-service: Consume
collection-service -> RabbitMQ: Publish { action: "verify", token } to auth-queue
auth-service -> RabbitMQ: Publish { userId: "uuid" } (xác nhận admin)
RabbitMQ -> collection-service: Consume
collection-service -> MongoDB: Cập nhật status thành "approved"
collection-service -> RabbitMQ: Publish { collectionId: "abc123", status: "approved" }
RabbitMQ -> api-gateway: Consume
api-gateway -> Admin Interface: Xác nhận duyệt

Người dùng -> Frontend: Bulk Mint NFT
Frontend -> RainbowKit: Lấy wallet_address
Frontend -> api-gateway: POST /nfts/bulk-mint-manual
api-gateway -> RabbitMQ: Publish { action: "bulkMintManual", metadataList, collectionId, wallet_address, token } to nft-queue
RabbitMQ -> nft-service: Consume
nft-service -> RabbitMQ: Publish { action: "verify", token } to auth-queue
auth-service -> RabbitMQ: Publish { userId: "uuid" }
RabbitMQ -> nft-service: Consume
nft-service -> MongoDB: Kiểm tra collection status = "approved"
nft-service -> IPFS: Upload từng metadata, nhận danh sách tokenURIs
nft-service -> Sepolia: Gọi bulkMint(wallet_address, tokenURIs) từ backend
Sepolia -> nft-service: Trả về txHash, tokenIds
nft-service -> MongoDB: Lưu danh sách NFT
nft-service -> RabbitMQ: Publish { txHash, tokenIds, success: true }
RabbitMQ -> api-gateway: Consume
api-gateway -> Frontend: Trả về txHash, tokenIds